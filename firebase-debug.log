[debug] [2025-07-31T13:10:41.359Z] ----------------------------------------------------------------------
[debug] [2025-07-31T13:10:41.368Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\footb\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only firestore:rules
[debug] [2025-07-31T13:10:41.369Z] CLI Version:   14.4.0
[debug] [2025-07-31T13:10:41.369Z] Platform:      win32
[debug] [2025-07-31T13:10:41.369Z] Node Version:  v22.15.0
[debug] [2025-07-31T13:10:41.370Z] Time:          Thu Jul 31 2025 22:10:41 GMT+0900 (日本標準時)
[debug] [2025-07-31T13:10:41.371Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-07-31T13:10:41.378Z] >>> [apiv2][query] GET https://firebase-public.firebaseio.com/cli.json [none]
[debug] [2025-07-31T13:10:41.735Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-07-31T13:10:41.736Z] > authorizing via signed-in user (footballtopjp96@gmail.com)
[debug] [2025-07-31T13:10:41.736Z] [iam] checking project footballtop-a4271 for permissions ["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]
[debug] [2025-07-31T13:10:41.737Z] Checked if tokens are valid: false, expires at: 1753892307146
[debug] [2025-07-31T13:10:41.737Z] Checked if tokens are valid: false, expires at: 1753892307146
[debug] [2025-07-31T13:10:41.737Z] > refreshing access token with scopes: []
[debug] [2025-07-31T13:10:41.738Z] >>> [apiv2][query] POST https://www.googleapis.com/oauth2/v3/token [none]
[debug] [2025-07-31T13:10:41.738Z] >>> [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-07-31T13:10:42.775Z] <<< [apiv2][status] GET https://firebase-public.firebaseio.com/cli.json 200
[debug] [2025-07-31T13:10:42.775Z] <<< [apiv2][body] GET https://firebase-public.firebaseio.com/cli.json {"cloudBuildErrorAfter":1594252800000,"cloudBuildWarnAfter":1590019200000,"defaultNode10After":1594252800000,"minVersion":"3.0.5","node8DeploysDisabledAfter":1613390400000,"node8RuntimeDisabledAfter":1615809600000,"node8WarnAfter":1600128000000}
[debug] [2025-07-31T13:10:43.291Z] <<< [apiv2][status] POST https://www.googleapis.com/oauth2/v3/token 200
[debug] [2025-07-31T13:10:43.292Z] <<< [apiv2][body] POST https://www.googleapis.com/oauth2/v3/token [omitted]
[debug] [2025-07-31T13:10:43.308Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/footballtop-a4271:testIamPermissions [none]
[debug] [2025-07-31T13:10:43.309Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/footballtop-a4271:testIamPermissions x-goog-quota-user=projects/footballtop-a4271
[debug] [2025-07-31T13:10:43.309Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/footballtop-a4271:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[debug] [2025-07-31T13:10:45.800Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/footballtop-a4271:testIamPermissions 200
[debug] [2025-07-31T13:10:45.800Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/footballtop-a4271:testIamPermissions {"permissions":["datastore.indexes.create","datastore.indexes.delete","datastore.indexes.list","datastore.indexes.update","firebase.projects.get"]}
[info] 
[info] === Deploying to 'footballtop-a4271'...
[info] 
[info] i  deploying firestore 
[info] i  cloud.firestore: checking firestore.rules for compilation errors... 
[debug] [2025-07-31T13:10:45.810Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:45.811Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:45.811Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271:test [none]
[debug] [2025-07-31T13:10:45.811Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271:test [omitted]
[debug] [2025-07-31T13:10:47.723Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271:test 200
[debug] [2025-07-31T13:10:47.723Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271:test {}
[info] +  cloud.firestore: rules file firestore.rules compiled successfully 
[debug] [2025-07-31T13:10:47.726Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:47.726Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:47.727Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/releases pageSize=10&pageToken=
[debug] [2025-07-31T13:10:48.856Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/releases 200
[debug] [2025-07-31T13:10:48.856Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/releases {"releases":[{"name":"projects/footballtop-a4271/releases/cloud.firestore","rulesetName":"projects/footballtop-a4271/rulesets/e1ecc80f-2563-4bad-abe9-48dd30e39279","createTime":"2025-05-25T05:21:03.381208Z","updateTime":"2025-07-30T15:36:33.850955Z"}]}
[debug] [2025-07-31T13:10:48.856Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:48.856Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:48.857Z] >>> [apiv2][query] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets/e1ecc80f-2563-4bad-abe9-48dd30e39279 [none]
[debug] [2025-07-31T13:10:50.298Z] <<< [apiv2][status] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets/e1ecc80f-2563-4bad-abe9-48dd30e39279 200
[debug] [2025-07-31T13:10:50.299Z] <<< [apiv2][body] GET https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets/e1ecc80f-2563-4bad-abe9-48dd30e39279 [omitted]
[info] i  firestore: uploading rules firestore.rules... 
[debug] [2025-07-31T13:10:50.301Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:50.301Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:50.302Z] >>> [apiv2][query] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets [none]
[debug] [2025-07-31T13:10:50.302Z] >>> [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets [omitted]
[debug] [2025-07-31T13:10:51.724Z] <<< [apiv2][status] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets 200
[debug] [2025-07-31T13:10:51.725Z] <<< [apiv2][body] POST https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/rulesets {"name":"projects/footballtop-a4271/rulesets/0c278639-d32a-45ea-bdc2-dd6e820b6fe1","source":{"files":[{"content":"rules_version = '2';\n\nservice cloud.firestore {\n  match /databases/{database}/documents {\n\n    function isOwner(uid) {\n      return request.auth != null && request.auth.uid == uid;\n    }\n\n    // USERS\n    match /users/{userId} {\n      allow create: if request.auth != null;\n      allow get: if true;\n      allow list: if request.auth != null;\n      allow update, delete: if isOwner(userId);\n\n      match /bookmarks/{bookmarkId} {\n        allow read, write, delete: if isOwner(userId);\n      }\n    }\n\n    // POSTS\n    match /posts/{postId} {\n      allow get: if true;\n      allow list: if true;\n      allow create: if request.auth != null;\n      allow update, delete: if isOwner(resource.data.author.id);\n\n      match /likes/{userId} {\n        allow read, list: if true;\n        allow create, delete: if isOwner(userId);\n      }\n    }\n\n    // SIMPLE-POSTS\n    match /simple-posts/{postId} {\n      allow get: if true;\n      allow list: if true;\n      allow create: if request.auth != null;\n      allow update, delete: if isOwner(resource.data.author.id);\n\n       match /likes/{userId} {\n        allow read, list: if true;\n        allow create, delete: if isOwner(userId);\n      }\n    }\n\n    // SIMPLE-TRAVELS\n    match /simple-travels/{travelId} {\n      allow get: if true;\n      allow list: if request.auth != null;\n      allow create: if request.auth != null;\n      allow update, delete: if isOwner(resource.data.author.id);\n    }\n\n    // SPOTS\n    match /spots/{spotId} {\n      allow get: if true;\n      allow list: if true;\n      allow create: if isOwner(request.resource.data.author.id);\n      allow update, delete: if isOwner(resource.data.author.id);\n\n      match /comments/{commentId} {\n        allow read: if true;\n        allow create: if request.auth != null;\n        allow delete: if isOwner(resource.data.author.id);\n      }\n    }\n  }\n}\n","name":"firestore.rules"}]},"createTime":"2025-07-31T13:10:52.245631Z","metadata":{"services":["cloud.firestore"]}}
[debug] [2025-07-31T13:10:51.725Z] [rules] created ruleset projects/footballtop-a4271/rulesets/0c278639-d32a-45ea-bdc2-dd6e820b6fe1
[debug] [2025-07-31T13:10:51.726Z] [rules] releasing cloud.firestore/(default) with ruleset projects/footballtop-a4271/rulesets/0c278639-d32a-45ea-bdc2-dd6e820b6fe1
[debug] [2025-07-31T13:10:51.727Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:51.727Z] Checked if tokens are valid: true, expires at: 1753971042292
[debug] [2025-07-31T13:10:51.727Z] >>> [apiv2][query] PATCH https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/releases/cloud.firestore/(default) [none]
[debug] [2025-07-31T13:10:51.727Z] >>> [apiv2][body] PATCH https://firebaserules.googleapis.com/v1/projects/footballtop-a4271/releases/cloud.firestore/(default) {"release":{"name":"projects/footballtop-a4271/releases/cloud.firestore/(default)","rulesetName":"projects/footballtop-a4271/rulesets/0c278639-d32a-45ea-bdc2-dd6e820b6fe1"}}
